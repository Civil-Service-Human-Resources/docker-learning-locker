version: '2'

services:
  mongodb:
    image: 'mongo:3.6'

  redis:
    image: 'redis:4'

  api-server:
    image: 'cautionyourblast/learning-locker-api-server'
    ports:
      - '8080:8080'
    env_file:
      - variables.env
    depends_on:
      - mongodb
      - redis

  api-worker:
    image: 'cautionyourblast/learning-locker-api-worker'
    env_file:
      - variables.env
    depends_on:
      - api-server

  ui:
    image: 'cautionyourblast/learning-locker-ui'
    env_file:
      - variables.env
    ports:
      - '3000:3000'
    depends_on:
      - api-server
